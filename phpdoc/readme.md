## PHPDoc

#### Применение

`PHPDoc` в мире **PHP** нашло различное применение. Не стоит увлекться этим слишком сильно.

`PHPDoc` в руках неопытного разработчика больше мешает, чем помогает

Лучше разобрать несколькой кейсов, чтобы быстрее донести информацию

В появлением в PHP возвращаемых типов и типов аргументов, некоторые `PHPDoc` стали не нужно вовсе.

Если тип аргумента или возвращаемого значения функции является классом, то стоит использовать
абсолютный `namespace` до конкретного класса.
###### Неверное использование
```php
use App\Entity\User;

...

/* @var User $model */
```
###### Правильное использование
```php
/* @var \App\Entity\User $model */
```
Интерпретатор **PHP** работает иначе, чем, например, компилятор **Java**, где есть такие же аннотации.
Интерпретатор **PHP** при выполнении файла пропускает все комментарии и не считает их за инструкции.

Поэтому, в первом случае для интерпретатора **PHP** будет существовать лишняя инструкция `use use App\Entity\User;`, 
на которую он потратит своё время, хоть и не значительное.

**IDE** прекрасно подсказывают типы на основе синтаксиса **PHP**. 
В таких случаях не стоит писать `PHPDoc`, потому: 
- Дублирует информацию
- Увеличивает размер файла
- Ухудшает читаемость файла
- Ухудшает быструю навигацию в файле
- Заставляет актуализировать `PHPDoc` в случае изменений

###### Избыточное дублирование: указан примитивный **return type** `getRandomNumber(): int`
```php
/**
 * @return int
 */
public function getRandomNumber(): int
{
    return rand(1, 100);
}
```
###### Избыточное дублирование: указаны типы всех аргументов и тип возвращаемого значения
```php
/**
 * @param int $min
 * @param int|null $max
 *
 * @return int
 */
public function getRandomNumber(int $min, ?int $max): int
{
    $max = $max ?? 100;
    return rand($min, $max);
}
```
###### Избыточное дублирование: указаны типы всех аргументов и тип возвращаемого значения
###### Тело функции занимает 6 строк и 7 строк занимает `PHPDoc`, который не расскажет ничего нового.
```php
/**
 * @param string $name
 * @param int $age
 * @param \DateTime $time
 *
 * @return \App\Entity\User
 */
public function createUser(string $name, int $age, DateTime $time): User
{
    $model = new User($name, $age, $time);

    return $model;
}
```
#### Когда нужно использовать `PHPDoc`?
Если тип аргументов функций или тип возвращаемого значения является `Generic` типом.
Например, массив объектов класса `User`
##### Примеры
```php
/**
 * @param string $name
 * @param int $age
 * @param \DateTime $time
 *
 * @return \App\Entity\User[]
 */
public function createUsers(string $name, int $age, DateTime $time): array
{
    $models = [];
    $models[] = new User($name, $age, $time);
    $models[] = new User($name, $age, $time);
    $models[] = new User($name, $age, $time);

    return $models;
}
```
```php
/**
 * @param \App\Entity\Link[]
 */
public function eraseLinks(array $models): void
{
    foreach($models as $model) {
        $model->dettach();
    }
}
```
Такие `PHPDoc`-и помогают `IDE` распознать типы переменных и правильно выдать подсказки.

#### Controller::action
Нет никакого смысла генерировать `PHPDoc` для экшенов контроллеров. 

Экшен контроллера вызывает роутер, а не мы. 
Роутеру не нужны подсказки: какой тип будет возвращает, какие `Exception`-ы может кинуть метод и прочее.
Поэтому `PHPDoc` для `action`-ов не имеет никакого практического смысла.

#### Exceptions 
`PHPDoc` имеет тег `@throws`, который говорит, какой класс ошибки может вернуться при вызове данного метода.
Не стоит писать всевозможные типы `Exception`-ов в `PHPDoc`, раздувая его в конечном методе до 10 строк.
Стоит избегать тега `@throws` по возможности. 

Надеюсь, когда-нибудь **IDE** научатся глубоко анализировать цепочку вызовов и подсказывать, 
какие типы ошибок могут возникнуть при вызове конкретного метода.

Единственная проблема с тегом `@throws` сейчас такая, 
что **IDE** не подсвечивает `catch` конструкцию, 
если не указан конкретный `Exception` в `@throws` теге.

